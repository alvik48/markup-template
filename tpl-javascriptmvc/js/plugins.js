/* ------------------------------------------------------------------------------------------
    JQUERY MX
------------------------------------------------------------------------------------------ */

(function(f){var g={undHash:/_|-/,colons:/::/,words:/([A-Z]+)([A-Z][a-z])/g,lowUp:/([a-z\d])([A-Z])/g,dash:/([a-z\d])([A-Z])/g,replacer:/\{([^\}]+)\}/g,dot:/\./},b=function(h,e,i){return h[e]!==undefined?h[e]:i&&(h[e]={})},d=function(h){var e=typeof h;return h&&(e=="function"||e=="object")},a,c=f.String=f.extend(f.String||{},{getObject:a=function(i,e,p){i=i?i.split(g.dot):[];var l=i.length,m,j,k,o=0;e=f.isArray(e)?e:[e||window];if(l==0){return e[0]}for(;m=e[o++];){for(k=0;k<l-1&&d(m);k++){m=b(m,i[k],p)}if(d(m)){j=b(m,i[k],p);if(j!==undefined){p===false&&delete m[i[k]];return j}}}},capitalize:function(e){return e.charAt(0).toUpperCase()+e.substr(1)},camelize:function(e){e=c.classize(e);return e.charAt(0).toLowerCase()+e.substr(1)},classize:function(h,e){h=h.split(g.undHash);for(var i=0;i<h.length;i++){h[i]=c.capitalize(h[i])}return h.join(e||"")},niceName:function(e){return c.classize(e," ")},underscore:function(e){return e.replace(g.colons,"/").replace(g.words,"$1_$2").replace(g.lowUp,"$1_$2").replace(g.dash,"_").toLowerCase()},sub:function(h,e,j){var i=[];j=typeof j=="boolean"?!j:j;i.push(h.replace(g.replacer,function(l,k){l=a(k,e,j);if(d(l)){i.push(l);return""}else{return""+l}}));return i.length<=1?i[0]:i},_regs:g})})(jQuery);(function(h){var g=false,c=h.makeArray,b=h.isFunction,f=h.isArray,e=h.extend,o=h.String.getObject,d=function(i,j){return i.concat(c(j))},k=/xyz/.test(function(){})?/\b_super\b/:/.*/,a=function(j,m,l){l=l||j;for(var i in j){l[i]=b(j[i])&&b(m[i])&&k.test(j[i])?function(n,p){return function(){var q=this._super,r;this._super=m[n];r=p.apply(this,arguments);this._super=q;return r}}(i,j[i]):j[i]}};clss=h.Class=function(){arguments.length&&clss.extend.apply(clss,arguments)};e(clss,{proxy:function(i){var l=c(arguments),j;i=l.shift();f(i)||(i=[i]);j=this;return function(){for(var m=d(l,arguments),n,p=i.length,q=0,r;q<p;q++){if(r=i[q]){if((n=typeof r=="string")&&j._set_called){j.called=r}m=(n?j[r]:r).apply(j,m||[]);if(q<p-1){m=!f(m)||m._use_call?[m]:m}}}return m}},newInstance:function(){var i=this.rawInstance(),j;if(i.setup){j=i.setup.apply(i,arguments)}if(i.init){i.init.apply(i,f(j)?j:arguments)}return i},setup:function(i){this.defaults=e(true,{},i.defaults,this.defaults);return arguments},rawInstance:function(){g=true;var i=new this;g=false;return i},extend:function(t,r,q){function s(){if(!g){return this.constructor!==s&&arguments.length?arguments.callee.extend.apply(arguments.callee,arguments):this.Class.newInstance.apply(this.Class,arguments)}}if(typeof t!="string"){q=r;r=t;t=null}if(!q){q=r;r=null}q=q||{};var l=this,m=this.prototype,n,p,j,i;g=true;i=new this;g=false;a(q,m,i);for(n in this){if(this.hasOwnProperty(n)){s[n]=this[n]}}a(r,this,s);if(t){j=t.split(/\./);p=j.pop();j=m=o(j.join("."),window,true);m[p]=s}e(s,{prototype:i,namespace:j,shortName:p,constructor:s,fullName:t});s.prototype.Class=s.prototype.constructor=s;p=s.setup.apply(s,d([l],arguments));if(s.init){s.init.apply(s,p||d([l],arguments))}return s}});clss.callback=clss.prototype.callback=clss.prototype.proxy=clss.proxy})(jQuery);(function(b){var c=jQuery.cleanData;b.cleanData=function(a){for(var f=0,e;(e=a[f])!==undefined;f++){b(e).triggerHandler("destroyed")}c(a)}})(jQuery);(function(T){var f=function(h,e,l){var k,j=h.bind&&h.unbind?h:T(R(h)?[h]:h);if(e.indexOf(">")===0){e=e.substr(1);k=function(m){m.target===h&&l.apply(this,arguments)}}j.bind(e,k||l);return function(){j.unbind(e,k||l);h=e=l=k=null}},Q=T.makeArray,d=T.isArray,R=T.isFunction,P=T.extend,J=T.String,H=T.each,c=Array.prototype.slice,b=function(h,e,l,k){var j=h.delegate&&h.undelegate?h:T(R(h)?[h]:h);j.delegate(e,l,k);return function(){j.undelegate(e,l,k);j=h=l=k=e=null}},F=function(h,e,k,j){return j?b(h,j,e,k):f(h,e,k)},O=function(h,e){var j=typeof e=="string"?h[e]:e;return function(){h.called=e;return j.apply(h,[this.nodeName?T(this):this].concat(c.call(arguments,0)))}},a=/\./g,L=/_?controllers?/ig,D=function(e){return J.underscore(e.replace("jQuery.","").replace(a,"_").replace(L,""))},I=/[^\w]/,g=/\{([^\}]+)\}/g,G=/^(?:(.*?)\s)?([\w\.\:>]+)$/,N,M=function(h,e){return T.data(h,"controllers",e)};T.Class("jQuery.Controller",{setup:function(){this._super.apply(this,arguments);if(!(!this.shortName||this.fullName=="jQuery.Controller")){this._fullName=D(this.fullName);this._shortName=D(this.shortName);var h=this,e=this.pluginName||this._fullName,j;T.fn[e]||(T.fn[e]=function(n){var l=Q(arguments),k=typeof n=="string"&&R(h.prototype[n]),m=l[0];return this.each(function(){var o=M(this);if(o=o&&o[e]){k?o[m].apply(o,l.slice(1)):o.update.apply(o,l)}else{h.newInstance.apply(h,[this].concat(l))}})});this.actions={};for(j in this.prototype){if(!(j=="constructor"||!R(this.prototype[j]))){if(this._isAction(j)){this.actions[j]=this._action(j)}}}}},hookup:function(e){return new this(e)},_isAction:function(e){return I.test(e)?true:T.inArray(e,this.listensTo)>-1||T.event.special[e]||K[e]},_action:function(h,e){g.lastIndex=0;if(!e&&g.test(h)){return null}h=e?J.sub(h,[e,window]):h;e=d(h);var j=(e?h[1]:h).match(G);return{processor:K[j[2]]||N,parts:j,delegate:e?h[0]:undefined}},processors:{},listensTo:[],defaults:{}},{setup:function(h,e){var k=this.constructor;h=(typeof h=="string"?T(h):h.jquery?h:[h])[0];var j=k.pluginName||k._fullName;this.element=T(h).addClass(j);(M(h)||M(h,{}))[j]=this;this.options=P(P(true,{},k.defaults),e);this.called="init";this.bind();return[this.element,this.options].concat(Q(arguments).slice(2))},bind:function(h,e,l){if(h===undefined){this._bindings=[];h=this.constructor;e=this._bindings;l=h.actions;var k=this.element;for(funcName in l){if(l.hasOwnProperty(funcName)){ready=l[funcName]||h._action(funcName,this.options);e.push(ready.processor(ready.delegate||k,ready.parts[2],ready.parts[1],funcName,this))}}var j=O(this,"destroy");k.bind("destroyed",j);e.push(function(m){T(m).unbind("destroyed",j)});return e.length}if(typeof h=="string"){l=e;e=h;h=this.element}return this._binder(h,e,l)},_binder:function(h,e,k,j){if(typeof k=="string"){k=O(this,k)}this._bindings.push(F(h,e,k,j));return this._bindings.length},_unbind:function(){var e=this.element[0];H(this._bindings,function(h,j){j(e)});this._bindings=[]},delegate:function(h,e,k,j){if(typeof h=="string"){j=k;k=e;e=h;h=this.element}return this._binder(h,k,j,e)},update:function(e){P(this.options,e);this._unbind();this.bind()},destroy:function(){if(this._destroyed){throw this.constructor.shortName+" controller already deleted"}var e=this.constructor.pluginName||this.constructor._fullName;this._destroyed=true;this.element.removeClass(e);this._unbind();delete this._actions;delete this.element.data("controllers")[e];T(this).triggerHandler("destroyed");this.element=null},find:function(e){return this.element.find(e)},_set_called:true});var K=T.Controller.processors;N=function(h,e,l,k,j){return F(h,e,O(j,k),l)};H("change click contextmenu dblclick keydown keyup keypress mousedown mousemove mouseout mouseover mouseup reset resize scroll select submit focusin focusout mouseenter mouseleave".split(" "),function(h,e){K[e]=N});var S,i=function(h,e){for(S=0;S<e.length;S++){if(typeof e[S]=="string"?h.constructor._shortName==e[S]:h instanceof e[S]){return true}}return false};T.fn.extend({controllers:function(){var h=Q(arguments),e=[],l,k,j;this.each(function(){l=T.data(this,"controllers");for(j in l){if(l.hasOwnProperty(j)){k=l[j];if(!h.length||i(k,h)){e.push(k)}}}});return e},controller:function(){return this.controllers.apply(this,arguments)[0]}})})(jQuery);(function(I){var F=function(e){return e.replace(/^\/\//,"").replace(/[\/\.]/g,"_")},j=I.makeArray,m=1,J=I.View=function(h,e,r,q){if(typeof r==="function"){q=r;r=undefined}var p=k(e);if(p.length){var o=I.Deferred();p.push(g(h,true));I.when.apply(I,p).then(function(v){var u=j(arguments),t=u.pop()[0];if(H(e)){e=f(v)}else{for(var s in e){if(H(e[s])){e[s]=f(u.shift())}}}u=t(e,r);o.resolve(u);q&&q(u)});return o.promise()}else{var n;p=typeof q==="function";o=g(h,p);if(p){n=o;o.done(function(s){q(s(e,r))})}else{o.done(function(s){n=s(e,r)})}return n}},d=function(h,e){if(!h.match(/[^\s]/)){throw"$.View ERROR: There is no template or an empty template at "+e}},g=function(h,e){return I.ajax({url:h,dataType:"view",async:e})},H=function(e){return e&&I.isFunction(e.always)},k=function(h){var e=[];if(H(h)){return[h]}else{for(var n in h){H(h[n])&&e.push(h[n])}}return e},f=function(e){return I.isArray(e)&&e.length===3&&e[1]==="success"?e[0]:e};I.ajaxTransport("view",function(t,s){var r=s.url;t=r.match(/\.[\w\d]+$/);var q,p,o,n,h=function(u){u=q.renderer(o,u);if(J.cache){J.cached[o]=u}return{view:u}};if(p=document.getElementById(r)){t="."+p.type.match(/\/(x\-)?(.+)/)[2]}if(!t){t=J.ext;r+=J.ext}o=F(r);if(r.match(/^\/\//)){var e=r.substr(2);r=typeof steal==="undefined"?(r="/"+e):steal.root.mapJoin(e)+""}q=J.types[t];return{send:function(v,u){if(J.cached[o]){return u(200,"success",{view:J.cached[o]})}else{if(p){u(200,"success",h(p.innerHTML))}else{n=I.ajax({async:s.async,url:r,dataType:"text",error:function(){d("",r);u(404)},success:function(x){d(x,r);u(200,"success",h(x))}})}}},abort:function(){n&&n.abort()}}});I.extend(J,{hookups:{},hookup:function(h){var e=++m;J.hookups[e]=h;return e},cached:{},cache:true,register:function(e){this.types["."+e.suffix]=e;window.steal&&steal.type(e.suffix+" view js",function(h,p){var o=J.types["."+h.type],n=F(h.rootSrc+"");h.text=o.script(n,h.text);p()})},types:{},ext:".ejs",registerScript:function(h,e,n){return"$.View.preload('"+e+"',"+J.types["."+h].script(e,n)+");"},preload:function(h,e){J.cached[h]=function(o,n){return e.call(o,o,n)}}});window.steal&&steal.type("view js",function(h,e){var o=J.types["."+h.type],n=F(h.rootSrc+"");h.text="steal('"+(o.plugin||"jquery/view/"+h.type)+"').then(function($){$.View.preload('"+n+"',"+h.text+");\n})";e()});var c,G,b,a,w,E,l,i={val:true,text:true};c=function(h){var e=I.fn[h];I.fn[h]=function(){var q=j(arguments),p,o,n=this;if(H(q[0])){q[0].done(function(r){G.call(n,[r],e)});return this}else{if(b(q)){if(p=E(q)){o=q[p];q[p]=function(r){G.call(n,[r],e);o.call(n,r)};J.apply(J,q);return this}q=J.apply(J,q);if(H(q)){q.done(function(r){G.call(n,[r],e)});return this}else{q=[q]}}}return i[h]?e.apply(this,q):G.call(this,q,e)}};G=function(h,e){var o;for(var n in J.hookups){break}if(n&&h[0]&&a(h[0])){o=J.hookups;J.hookups={};h[0]=I(h[0])}e=e.apply(this,h);o&&l(h[0],o);return e};b=function(h){var e=typeof h[1];return typeof h[0]=="string"&&(e=="object"||e=="function")&&!w(h[1])};w=function(e){return e.nodeType||e.jquery};a=function(e){if(w(e)){return true}else{if(typeof e==="string"){e=I.trim(e);return e.substr(0,1)==="<"&&e.substr(e.length-1,1)===">"&&e.length>=3}else{return false}}};E=function(e){return typeof e[3]==="function"?3:typeof e[2]==="function"&&2};l=function(h,e){var q,p=0,o,n;h=h.filter(function(){return this.nodeType!=3});h=h.add("[data-view-id]",h);for(q=h.length;p<q;p++){if(h[p].getAttribute&&(o=h[p].getAttribute("data-view-id"))&&(n=e[o])){n(h[p],o);delete e[o];h[p].removeAttribute("data-view-id")}}I.extend(J.hookups,e)};I.fn.hookup=function(){var e=J.hookups;J.hookups={};l(this,e);return this};I.each(["prepend","append","after","before","text","html","replaceWith","val"],function(h,e){c(e)})})(jQuery);(function(a){a.String.rsplit=function(g,h){for(var f=h.exec(g),j=[],i;f!==null;){i=f.index;if(i!==0){j.push(g.substring(0,i));g=g.slice(i)}j.push(f[0]);g=g.slice(f[0].length);f=h.exec(g)}g!==""&&j.push(g);return j}})(jQuery);(function(i){var v=function(a){eval(a)},p=i.String.rsplit,k=i.extend,w=i.isArray,x=/\r\n/g,y=/\r/g,z=/\n/g,A=/\n/,B=/\\/g,q=/"/g,C=/'/g,D=/\t/g,E=/\{/g,F=/\}/g,r=/\s*\(([\$\w]+)\)\s*->([^\n]*)/,s=function(a){return a.replace(B,"\\\\").replace(z,"\\n").replace(q,'\\"').replace(D,"\\t")},G=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(q,"&#34;").replace(C,"&#39;")},m=i.View,n=function(a){var b=a.match(E);a=a.match(F);return(b?b.length:0)-(a?a.length:0)},g=function(a){if(this.constructor!=g){var b=new g(a);return function(c,e){return b.render(c,e)}}if(typeof a=="function"){this.template={fn:a}}else{k(this,g.options,a);this.template=H(this.text,this.type,this.name)}};window.jQuery&&(jQuery.EJS=g);g.prototype.render=function(a,b){a=a||{};this._extra_helpers=b;b=new g.Helpers(a,b||{});return this.template.fn.call(a,a,b)};k(g,{text:function(a){if(typeof a=="string"){return a}if(a===null||a===undefined){return""}var b=a.hookup&&function(c,e){a.hookup.call(a,c,e)}||typeof a=="function"&&a||w(a)&&function(c,e){for(var d=0;d<a.length;d++){a[d].hookup?a[d].hookup(c,e):a[d](c,e)}};if(b){return"data-view-id='"+m.hookup(b)+"'"}return a.toString?a.toString():""},clean:function(a){return typeof a=="string"?G(a):typeof a=="number"?a:g.text(a)},options:{type:"<",ext:".ejs"}});var t=function(a,b,c){b=p(b,A);for(var e=0;e<b.length;e++){I(a,b[e],c)}},I=function(a,b,c){a.lines++;b=p(b,a.splitter);for(var e,d=0;d<b.length;d++){e=b[d];e!==null&&c(e,a)}},J=function(a,b){var c={};k(c,{left:a+"%",right:"%"+b,dLeft:a+"%%",dRight:"%%"+b,eeLeft:a+"%==",eLeft:a+"%=",cmnt:a+"%#",scan:t,lines:0});c.splitter=new RegExp("("+[c.dLeft,c.dRight,c.eeLeft,c.eLeft,c.cmnt,c.left,c.right+"\n",c.right,"\n"].join(")|(").replace(/\[/g,"\\[").replace(/\]/g,"\\]")+")");return c},H=function(a,b,c){a=a.replace(x,"\n").replace(y,"\n");b=b||"<";var e=new g.Buffer(["var ___v1ew = [];"],[]),d="",u=function(h){e.push("___v1ew.push(",'"',s(h),'");')},l=null,o=function(){d=""},j=[];t(J(b,b==="["?"]":">"),a||"",function(h,f){if(l===null){switch(h){case"\n":d+="\n";u(d);e.cr();o();break;case f.left:case f.eLeft:case f.eeLeft:case f.cmnt:l=h;d.length>0&&u(d);o();break;case f.dLeft:d+=f.left;break;default:d+=h;break}}else{switch(h){case f.right:switch(l){case f.left:h=n(d);f=j.length&&h==-1?j.pop():";";f==="));"&&e.push("return ___v1ew.join('')");e.push(d,f);h===1&&j.push(";");break;case f.eLeft:(h=n(d))&&j.push("));");if(r.test(d)){f=d.match(r);d="function(__){var "+f[1]+"=$(__);"+f[2]+"}"}e.push("___v1ew.push(","jQuery.EJS.clean(",d,h?"var ___v1ew = [];":"));");break;case f.eeLeft:(h=n(d))&&j.push("));");e.push("___v1ew.push(","jQuery.EJS.text(",d,h?"var ___v1ew = [];":"));");break}l=null;o();break;case f.dRight:d+=f.right;break;default:d+=h;break}}});d.length>0&&e.push("___v1ew.push(",'"',s(d)+'");');a={out:"try { with(_VIEW) { with (_CONTEXT) {"+e.close()+" return ___v1ew.join('')}}}catch(e){e.lineNumber=null;throw e;}"};v.call(a,"this.fn = (function(_CONTEXT,_VIEW){"+a.out+"});\r\n//@ sourceURL="+c+".js");return a};g.Buffer=function(a,b){this.line=[];this.script=[];this.post=b;this.push.apply(this,a)};g.Buffer.prototype={push:function(){this.line.push.apply(this.line,arguments)},cr:function(){this.script.push(this.line.join(""),"\n");this.line=[]},close:function(){if(this.line.length>0){this.script.push(this.line.join(""));this.line=[]}this.post.length&&this.push.apply(this,this.post);this.script.push(";");return this.script.join("")}};g.Helpers=function(a,b){this._data=a;this._extras=b;k(this,b)};g.Helpers.prototype={plugin:function(){var a=i.makeArray(arguments),b=a.shift();return function(c){c=i(c);c[b].apply(c,a)}},view:function(a,b,c){c=c||this._extras;b=b||this._data;return m(a,b,c)}};m.register({suffix:"ejs",script:function(a,b){return"jQuery.EJS(function(_CONTEXT,_VIEW) { "+(new g({text:b,name:a})).template.out+" })"},renderer:function(a,b){return g({text:b,name:a})}})})(jQuery);